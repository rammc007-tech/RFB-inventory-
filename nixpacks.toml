# Nixpacks configuration for Railway
# FIXED: Uses build script to properly handle environment variables

[phases.setup]
nixPkgs = ["nodejs-18_x"]

[phases.install]
cmds = [
  "echo 'üì¶ Installing dependencies...'",
  "npm ci --prefer-offline --no-audit 2>&1 || npm install --prefer-offline --no-audit 2>&1 || echo '‚ö†Ô∏è Install warning (continuing)'",
  "echo '‚úÖ Dependencies installed'"
]

[phases.build]
cmds = [
  "chmod +x scripts/nixpacks-build.sh",
  "bash scripts/nixpacks-build.sh"
]
